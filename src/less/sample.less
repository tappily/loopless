@import 'loop';

@text-max-size: 42px;
@text-min-size: 12px;
@text-scale-strength: 1.1;
@text-scale-interpolation: 'ease-in';

/*
headers
*/

.loop-mix-in(@selector, @index, @from, @to) when(@selector = 'h') and (@text-scale-interpolation = 'ease-in') {
  @range: @text-max-size - @text-min-size;
  @count: @index - @from;
  @ease: pow(@count / (@to - 1), @text-scale-strength);
  font-size: round(@text-min-size + @range * @ease);
}

.loop-mix-in(@selector, @index, @from, @to) when(@selector = 'h') and (@text-scale-interpolation = 'ease-out') {
  @range: @text-max-size - @text-min-size;
  @count: @index - @from;
  @ease: 1 - pow(1 - @count / (@to - 1), @text-scale-strength);
  font-size: round(@text-min-size + @range * @ease);
}

.loop(1, 6, 'h', '');

/*
grid
*/

@grid-min-width: 480px;
@grid-max-width: 960px;
@grid-width: 100%;
@grid-gutter-width: 0.8%;
@grid-span-name: '.grid-span';
@grid-column-count: 12;
@grid-column-width: (@grid-width - @grid-gutter-width * (@grid-column-count - 1)) / @grid-column-count;

.grid {
  @media screen and (min-width:@grid-max-width) {
    width: @grid-max-width;
  }
  @media screen and (max-width:@grid-max-width) {
    width: 100%;
  }
  &:after {
    clear: both;
    content: " ";
    display: block;
    height: 0;
  }
}

.grid-col {
  float: left;
  margin-left: @grid-gutter-width;

  @media screen and (max-width:@grid-min-width) {
    float: none;
    margin-left: 0;
    width: auto;
  }
}

.grid-break {
  clear: left;
  margin-left: 0;
}

.loop-mix-in(@selector, @index, @from, @to) when (@selector = @grid-span-name) {
  @gutter-accumulated: @grid-gutter-width * (@index - @from);
  width: round(@grid-column-width * @index + @gutter-accumulated, 2);
}

.loop(1, @grid-column-count, @grid-span-name);

/*
overlay
*/
.loop-mix-in(@selector, @index, @from, @to) when (@selector = '#overlay') {
  z-index: (@index - @from);
}

.loop(0, 5, '#overlay', '.l-');

